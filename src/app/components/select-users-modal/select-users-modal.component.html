<!-- Canvas element: content box only (no overlay), same styling -->
@if (asCanvasElement()) {
  <div class="bg-brandcolor-white rounded-[8px] pt-6 px-6 pb-6 w-full max-w-2xl shadow-lg">
    <h3 class="text-brandcolor-textstrong font-semibold text-lg mb-0.5">Users</h3>
    <p class="text-brandcolor-textweak text-sm mb-4">Please select the users you want to see</p>
    <div class="mb-6 w-full">
      <input
        type="text"
        [(ngModel)]="searchQuery"
        placeholder="Search users"
        class="w-full px-4 py-2 border border-brandcolor-strokestrong rounded-lg focus:outline-none focus:border-brandcolor-textstrong focus:ring-0 bg-brandcolor-white text-brandcolor-textstrong text-center">
    </div>
    <div class="grid grid-cols-3 gap-x-4 gap-y-3">
      @for (name of userNames; track name) {
        <label class="flex items-center gap-2 cursor-pointer hover:bg-brandcolor-fill p-2 rounded text-sm text-brandcolor-textstrong">
          <input type="checkbox" class="w-4 h-4 text-brandcolor-primary border-brandcolor-strokeweak rounded focus:ring-brandcolor-primary checked:bg-brandcolor-primary checked:border-brandcolor-primary">
          <span>{{ name }}</span>
        </label>
      }
    </div>
    <!-- Divider and actions -->
    <hr class="border-brandcolor-strokeweak mt-6 mb-4">
    <div class="flex justify-end gap-3">
      <button type="button" class="border border-brandcolor-strokeweak bg-brandcolor-white text-brandcolor-textstrong hover:bg-brandcolor-neutralhover rounded-md px-4 py-2 font-medium">Cancel</button>
      <button type="button" class="bg-brandcolor-primary text-brandcolor-white hover:bg-brandcolor-primaryhover rounded-md px-4 py-2 font-medium">OK</button>
    </div>
  </div>
} @else {
  <!-- Modal overlay: shown when isOpen(), click outside (on overlay) closes via (closed) -->
  @if (isOpen()) {
    <div class="fixed inset-0 z-50 flex items-center justify-center bg-black/40"
         (click)="closed.emit()"
         role="dialog"
         aria-modal="true"
         aria-labelledby="select-users-modal-title">
      <div class="bg-brandcolor-white rounded-[8px] pt-6 px-6 pb-6 w-full max-w-2xl mx-4 shadow-lg"
           (click)="$event.stopPropagation()">
        <h3 id="select-users-modal-title" class="text-brandcolor-textstrong font-semibold text-lg mb-0.5">Users</h3>
        <p class="text-brandcolor-textweak text-sm mb-4">Please select the users you want to see</p>
        <div class="mb-6 w-full">
          <input
            type="text"
            [(ngModel)]="searchQuery"
            placeholder="Search users"
            class="w-full px-4 py-2 border border-brandcolor-strokestrong rounded-lg focus:outline-none focus:border-brandcolor-textstrong focus:ring-0 bg-brandcolor-white text-brandcolor-textstrong text-center">
        </div>
        <div class="grid grid-cols-3 gap-x-4 gap-y-3">
          @for (name of userNames; track name) {
            <label class="flex items-center gap-2 cursor-pointer hover:bg-brandcolor-fill p-2 rounded text-sm text-brandcolor-textstrong">
              <input type="checkbox" class="w-4 h-4 text-brandcolor-primary border-brandcolor-strokeweak rounded focus:ring-brandcolor-primary checked:bg-brandcolor-primary checked:border-brandcolor-primary">
              <span>{{ name }}</span>
            </label>
          }
        </div>
        <!-- Divider and actions -->
        <hr class="border-brandcolor-strokeweak mt-6 mb-4">
        <div class="flex justify-end gap-3">
          <button type="button" class="border border-brandcolor-strokeweak bg-brandcolor-white text-brandcolor-textstrong hover:bg-brandcolor-neutralhover rounded-md px-4 py-2 font-medium">Cancel</button>
          <button type="button" class="bg-brandcolor-primary text-brandcolor-white hover:bg-brandcolor-primaryhover rounded-md px-4 py-2 font-medium">OK</button>
        </div>
      </div>
    </div>
  }
}
