<aside 
  title="sidebar"
  [class.w-[222px]]="!isSidebarCollapsed"
  [class.w-16]="isSidebarCollapsed"
  [class.p-6]="!isSidebarCollapsed"
  [class.p-3]="isSidebarCollapsed"
  class="bg-brandcolor-textstrong border-r border-brandcolor-strokestrong transition-all duration-300 flex flex-col h-full rounded-none">
  
  <!-- Header with Logo -->
  <div class="pb-4 border-b border-brandcolor-strokestrong flex items-center justify-center">
    <a routerLink="/projects" title="sidebar-logo" class="flex items-center cursor-pointer">
      @if (!isSidebarCollapsed) {
        <img src="/logo-main.svg" alt="Logo" class="h-8 transition-all">
      } @else {
        <img src="/court.svg" alt="Logo" class="h-6 transition-all">
      }
    </a>
  </div>

  <!-- Dropdown with Border -->
  <div class="py-4 border-b border-brandcolor-strokestrong">
    <div class="relative">
      <button 
        title="sidebar-dropdown-button"
        [id]="'sidebar-dropdown-button-' + uniqueId" 
        [attr.data-dropdown-toggle]="'sidebar-dropdown-menu-' + uniqueId" 
        type="button" 
        [class.px-3]="!isSidebarCollapsed"
        [class.px-0]="isSidebarCollapsed"
        class="w-full h-[34px] border-[1.5px] border-brandcolor-textweak bg-brandcolor-textstrong text-brandcolor-white hover:bg-brandcolor-sidebarhover focus:border-brandcolor-secondary active:border-brandcolor-secondary disabled:opacity-50 rounded-md font-medium flex items-center transition-colors"
        [class.justify-between]="!isSidebarCollapsed"
        [class.justify-center]="isSidebarCollapsed">
        @if (!isSidebarCollapsed) {
          <div class="flex items-center gap-2 flex-1 justify-center">
            @if (selectedDropdownOption === 'dart') {
              <img src="/dart.svg" alt="Dart" class="w-[60px] h-5">
            } @else if (selectedDropdownOption === 'deep') {
              <img src="/deep.svg" alt="Deep" class="w-[60px] h-5">
            } @else {
              <span class="text-sm text-brandcolor-white">Select Option</span>
            }
          </div>
          <svg 
            class="w-4 h-4 text-brandcolor-white transition-transform flex-shrink-0"
            fill="none" 
            stroke="currentColor" 
            viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        } @else {
          @if (selectedDropdownOption === 'dart') {
            <img src="/dartalone.svg" alt="Dart" class="w-5 h-5">
          } @else if (selectedDropdownOption === 'deep') {
            <img src="/deepa.svg" alt="Deep" class="w-5 h-5">
          } @else {
            <img src="/dartalone.svg" alt="Dart" class="w-5 h-5">
          }
        }
      </button>
      <!-- Dropdown Menu -->
      <div 
        [id]="'sidebar-dropdown-menu-' + uniqueId" 
        [class.left-0]="!isSidebarCollapsed"
        [class.left-full]="isSidebarCollapsed"
        [class.ml-2]="isSidebarCollapsed"
        [class.min-w-full]="!isSidebarCollapsed"
        [class.min-w-[120px]]="isSidebarCollapsed"
        class="hidden z-50 bg-brandcolor-sidebarhover border border-brandcolor-strokestrong rounded-lg shadow-lg absolute top-10 h-[80px] px-6 py-1">
        <ul class="text-sm text-brandcolor-white h-full flex flex-col gap-1">
          <li>
            <a href="#" title="sidebar-dropdown-option-dart" (click)="onDropdownOptionSelect($event, 'dart')" 
              [class.border-brandcolor-secondary]="selectedDropdownOption === 'dart'"
              [class.border-transparent]="selectedDropdownOption !== 'dart'"
              [class.bg-brandcolor-textstrong]="selectedDropdownOption === 'dart'"
              [class.bg-transparent]="selectedDropdownOption !== 'dart'"
              class="flex items-center justify-center border-[1.5px] rounded-md transition-colors h-8 hover:bg-brandcolor-textstrong">
              <img [src]="isSidebarCollapsed ? '/dartalone.svg' : '/dart.svg'" alt="Dart" class="w-[60px] h-5">
            </a>
          </li>
          <li>
            <a href="#" title="sidebar-dropdown-option-deep" (click)="onDropdownOptionSelect($event, 'deep')" 
              [class.border-brandcolor-secondary]="selectedDropdownOption === 'deep'"
              [class.border-transparent]="selectedDropdownOption !== 'deep'"
              [class.bg-brandcolor-textstrong]="selectedDropdownOption === 'deep'"
              [class.bg-transparent]="selectedDropdownOption !== 'deep'"
              class="flex items-center justify-center border-[1.5px] rounded-md transition-colors h-8 hover:bg-brandcolor-textstrong">
              <img [src]="isSidebarCollapsed ? '/deepa.svg' : '/deep.svg'" alt="Deep" class="w-[60px] h-5">
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Menu Items -->
  <nav class="py-2 flex-1">
    <!-- Home -->
    <a 
      href="#" 
      title="sidebar-menu-home"
      (click)="onMenuItemClick('home', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'home'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">home</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Home</span>
      }
    </a>

    <!-- All projects -->
    <a 
      href="#" 
      title="sidebar-menu-all-projects"
      (click)="onMenuItemClick('all-projects', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'all-projects'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">folder</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">All projects</span>
      }
    </a>

    <!-- My projects with divider -->
    @if (!isSidebarCollapsed) {
      <div title="sidebar-menu-my-projects" class="flex items-center gap-2 py-3 px-4">
        <span class="material-symbols-outlined text-brandcolor-white material-symbols-filled" style="font-size: 20px; font-variation-settings: 'FILL' 1;">folder</span>
        <span class="text-brandcolor-white font-medium text-sm">My projects</span>
        <div class="flex-1 border-t border-brandcolor-strokestrong ml-2"></div>
      </div>
    }

    <!-- Search -->
    <a 
      href="#" 
      title="sidebar-menu-search"
      (click)="onMenuItemClick('search', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'search'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">search</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Search</span>
      }
    </a>

    <!-- Tracking -->
    <a 
      href="#" 
      title="sidebar-menu-tracking"
      (click)="onMenuItemClick('tracking', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'tracking'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">track_changes</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Tracking</span>
      }
    </a>

    <!-- Analytics -->
    <a 
      href="#" 
      title="sidebar-menu-analytics"
      (click)="onMenuItemClick('analytics', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'analytics'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">analytics</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Analytics</span>
      }
    </a>

    <!-- Pins -->
    <a 
      href="#" 
      title="sidebar-menu-pins"
      (click)="onMenuItemClick('pins', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'pins'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">push_pin</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Pins</span>
      }
    </a>

    <!-- Exports -->
    <a 
      href="#" 
      title="sidebar-menu-exports"
      (click)="onMenuItemClick('exports', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'exports'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">download</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Exports</span>
      }
    </a>

    <!-- Orders -->
    <a 
      href="#" 
      title="sidebar-menu-orders"
      (click)="onMenuItemClick('orders', $event)"
      [class.bg-brandcolor-primary]="activeMenuItem === 'orders'"
      [class.px-4]="!isSidebarCollapsed"
      [class.px-0]="isSidebarCollapsed"
      [class.justify-start]="!isSidebarCollapsed"
      [class.justify-center]="isSidebarCollapsed"
      class="flex items-center gap-3 py-3 hover:bg-brandcolor-sidebarhover transition-colors cursor-pointer text-brandcolor-white rounded-md">
      <span class="material-symbols-outlined text-brandcolor-white" style="font-size: 20px;">receipt</span>
      @if (!isSidebarCollapsed) {
        <span class="text-sm font-medium text-brandcolor-white">Orders</span>
      }
    </a>
  </nav>

  <!-- Toggle Button -->
  <div class="pt-4 border-t border-brandcolor-strokestrong" [class.flex]="!isSidebarCollapsed" [class.justify-end]="!isSidebarCollapsed">
    <button 
      title="sidebar-toggle-button"
      (click)="onToggleSidebar()"
      type="button"
      [class.w-full]="isSidebarCollapsed"
      class="flex items-center p-2 hover:bg-brandcolor-sidebarhover rounded-md transition-colors border-[1.5px] border-brandcolor-strokestrong"
      [class.justify-center]="isSidebarCollapsed"
      [class.justify-end]="!isSidebarCollapsed">
      <svg 
        [class.rotate-180]="isSidebarCollapsed"
        class="w-5 h-5 text-brandcolor-white transition-transform" 
        fill="none" 
        stroke="currentColor" 
        viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </button>
  </div>
</aside>
